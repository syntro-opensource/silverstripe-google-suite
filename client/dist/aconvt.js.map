{"version":3,"file":"aconvt.js","mappings":"YAOA,SAASA,EAAyBC,EAAOC,GAChB,iBAAXD,GACVE,QAAQC,MAAM,6BAEhB,IAAIC,EAASH,EAWb,OAVKG,IAAQA,EAASC,OAAOC,sBAM7BC,KAAK,QAAS,aAAc,CAC1BC,QAAU,GAAEJ,KAAUJ,OAGjB,EAsBT,SAASS,EAAcC,EAAWC,GAChC,MAAMC,EAAWC,SAASC,iBAAiBH,EAAWI,UACtD,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAASK,OAAQD,GAAK,EAExCJ,EAASI,GAAGE,iBAAiBR,GAAW,IAAMX,EAC5CY,EAAWQ,iBACXR,EAAWS,iBAmBjBf,OAAOgB,kBAVP,WACE,MAAMC,EAAejB,OAAOkB,gBACtBC,EAAgBnB,OAAOoB,iBAC7B,IAAK,IAAIT,EAAI,EAAGA,EAAIM,EAAaL,OAAQD,GAAK,EAC5CP,EAAc,QAASa,EAAaN,IAEtC,IAAK,IAAIU,EAAI,EAAGA,EAAIF,EAAcP,OAAQS,GAAK,EAC7CjB,EAAc,SAAUe,EAAcE,KAI1CrB,OAAOgB,oB","sources":["webpack://silverstripe-google-suite/./client/src/bundle.js"],"sourcesContent":["/**\n * broadcastConversionEvent - broadcast conversion event\n *\n * @param  {string} label the conversion label\n * @param  {string} id    the id of the ad account\n * @return {bool}\n */\nfunction broadcastConversionEvent(label, id) {\n  if (typeof (label) !== 'string') {\n    console.error('no conversion label given'); // eslint-disable-line no-console\n  }\n  let convId = id;\n  if (!convId) convId = window.ssgsuiteDefaultToken;\n  // const callback = function callback() {\n  //   if (url || typeof (url) !== 'undefined') {\n  //     window.location = url;\n  //   }\n  // };\n  gtag('event', 'conversion', { // eslint-disable-line no-undef\n    send_to: `${convId}/${label}`,\n    // event_callback: callback,\n  });\n  return false;\n}\n\n/**\n * hrefFromElement - get the href for external links from the element\n *\n * @param  {Node} element the element in question\n * @return {null|string}\n */\n// function hrefFromElement(element) {\n//   if (element.tagName && ['a', 'A'].includes(element.tagName) && element.attributes.href) {\n//     return element.attributes.href.value;\n//   }\n//   return null;\n// }\n\n/**\n * appendClickHandler - appends a conversion event on the given event type\n *\n * @param  {string} eventName  the event to track\n * @param  {object} conversion the conversion from the config\n */\nfunction appendHandler(eventName, conversion) {\n  const elements = document.querySelectorAll(conversion.selector);\n  for (let i = 0; i < elements.length; i += 1) {\n    // const url = conversion.conversion_url || hrefFromElement(elements[i]);\n    elements[i].addEventListener(eventName, () => broadcastConversionEvent(\n      conversion.conversion_label,\n      conversion.conversion_id,\n      // url,\n    ));\n  }\n}\n\n/**\n * ssgsuiteTrackConv - activates the conversion tracking\n */\nfunction ssgsuiteTrackConv() {\n  const trackOnClick = window.ssgsuiteOnClick;\n  const trackOnSubmit = window.ssgsuiteOnSubmit;\n  for (let i = 0; i < trackOnClick.length; i += 1) {\n    appendHandler('click', trackOnClick[i]);\n  }\n  for (let j = 0; j < trackOnSubmit.length; j += 1) {\n    appendHandler('submit', trackOnSubmit[j]);\n  }\n}\nwindow.ssgsuiteTrackConv = ssgsuiteTrackConv;\nwindow.ssgsuiteTrackConv();\n"],"names":["broadcastConversionEvent","label","id","console","error","convId","window","ssgsuiteDefaultToken","gtag","send_to","appendHandler","eventName","conversion","elements","document","querySelectorAll","selector","i","length","addEventListener","conversion_label","conversion_id","ssgsuiteTrackConv","trackOnClick","ssgsuiteOnClick","trackOnSubmit","ssgsuiteOnSubmit","j"],"sourceRoot":""}